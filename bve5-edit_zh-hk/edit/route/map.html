<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored by HTTrack Website Copier/3.x [XR/YP'2000] -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Map file format | Bve trainsim</title>
<link href="http://bvets.net/basic.css" rel="stylesheet" type="text/css">
<link href="../../zh-tw.css" rel="stylesheet" type="text/css">
</head>
<body>
<p><font size="5"><strong>地圖檔案</strong></font></p>
<p><br />
</p>
<p><b><font size="4">概要</font></b></p>
<p><br />
</p>
<table border="0" cellpadding="3" cellspacing="0">
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font face="Courier New, Courier, mono">BveTs Map 2.00:utf-8</font></td>
    <td valign="top">每個地圖檔案的第一行必須以「<a href="#header">標頭</a>」記載檔案格式。</td>
  </tr>
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font color="#339999" face="Courier New, Courier, mono">Curve</font><font face="Courier New, Courier, mono">.<font color="#339999">Gauge</font>(1.067);</font></td>
    <td valign="top">每句指令後方要以一個「;」（分號）作結尾。</td>
  </tr>
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"> <font color="#339999" face="Courier New, Courier, mono">Track</font><font face="Courier New, Courier, mono">[<font color="#339999"><font color="#993333">'Right'</font></font>].<font color="#339999">Position</font>(3.8, 0);</font></td>
    <td valign="top"><a href="#method">基本語法</a>中，每句指令由「物件」、「鍵」、「方法」和「參數」組成。</td>
  </tr>
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font face="Courier New, Courier, mono">0;</font></td>
    <td valign="top">指令如只有整數的話，則用作表示下述指令所套用到的<a href="#distance">距離點</a>。</td>
  </tr>
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font face="Courier New, Courier, mono">123; <font color="#339999">Curve</font>.<font color="#339999">BeginTransition</font>(); <font color="#339999">SpeedLimit</font>.<font color="#339999">Begin</font>(90);</font></td>
    <td valign="top">你可以記述多於一行指令。</td>
  </tr>
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font color="#339999" face="Courier New, Courier, mono">&nbsp;&nbsp;&nbsp;&nbsp;Track </font><font face="Courier New, Courier, mono">[ <font color="#339999"><font color="#993333">'Right' </font></font>] . <font color="#339999">Cant</font> ( 0 ) ;</font> 234 ;</td>
    <td valign="top">各指令詞之間可以插入空白字符。</td>
  </tr>
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font color="#339999" face="Courier New, Courier, mono">Curve</font><font face="Courier New, Courier, mono">.<font color="#339999">BeginCircular</font>(<br />
    600,<br />
    0.105<br />
    );</font></td>
    <td valign="top">各指令詞之間可以插入換行字符。然後就可以記述一個多行的指令。</td>
  </tr>
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font color="#339999" face="Courier New, Courier, mono">track</font><font face="Courier New, Courier, mono">[<font color="#339999"><font color="#993333">'right'</font></font>].<font color="#339999">cant</font>(0.105);</font></td>
    <td valign="top">大小寫均相同。</td>
  </tr>
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font face="Courier New, Courier, mono">345;<font color="#669933"> # 圓曲線終了</font></font></td>
    <td valign="top">以「#」（井號）或「//」（兩個斜號）作為該行文字的開端的話將會被視為<a href="#comment">註釋</a>行（<a href="#comment">comment</a>），並在讀取時被無視。</td>
  </tr>
</table>
<p><br />
</p>
<p><strong><font size="4"><a name="header" id="header"></a>標頭</font></strong></p>
<p><br />
</p>
<p><b>檔案格式</b></p>
<p>在檔案開端必須記述「BveTs Map 2.00」檔案格式。</p>
<p><b>字元編碼</b> <strong><font color="#FF6633" size="1">NEW</font></strong></p>
<p>在檔案格式以後，先寫上分號 ( : )，再寫上<a href="http://www.iana.org/assignments/character-sets/" target="_top">字元編碼名稱</a>，然後才開新行。請勿在分號的前或後方插入空白字符。如果略過設定字元編碼的話，程式會以 UTF-8 編碼來讀取其後內容。</p>
<p>以下舉例在使用 Shift-JIS 字元編碼時的寫法：</p>
<table border="0" cellpadding="3" cellspacing="0">
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font face="Courier New, Courier, mono">BveTs Map 2.00:shift_jis</font></td>
  </tr>
</table>
<p><br />
</p>
<p><b><font size="4"><a name="comment" id="comment"></a>註釋</font></b> <strong><font color="#FF6633" size="1">UP</font></strong></p>
<p><br />
</p>
<p>以「#」（井號）或「//」（兩個斜號）作為行的開端的話將會被無視。此與指令結尾時所使用的「;」（分號）有所不同。</p>
<p><br />
</p>
<p><b><font size="4"><a name="variable" id="variable"></a>變數</font></b> <strong><font color="#FF6633" size="1">NEW</font></strong></p>
<p><br />
</p>
<p>你可以將數値或文字寫入到變數中。要設定變數，先寫上變數名稱，再寫上等號 ( = )，然後寫上其值或<a href="#operator">運算式</a>。</p>
<table border="0" cellpadding="3" cellspacing="0">
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font face="Courier New, Courier, mono">$foo = 1.067;<br />
      $bar = <font color="#993333">'Hello'</font>;</font></td>
  </tr>
</table>
<p>當你在鍵中引用變數時，變數中已寫入的值將會被使用。</p>
<table border="0" cellpadding="3" cellspacing="0">
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font color="#339999" face="Courier New, Courier, mono">Track</font><font face="Courier New, Courier, mono">[$bar]</font><font color="#339999" face="Courier New, Courier, mono">.Gauge</font><font face="Courier New, Courier, mono">($foo); <font color="#339933"># 此句效果與 Track['Hello'].Gauge(1.067) 相同。</font><br />
    $foo2 = $foo; <font color="#339933"># $foo2 會被代入 1.067 的這個值。</font></font></td>
  </tr>
</table>
<p>數值、字串均可寫入到變數中。寫入字串時字串值需用單引號「'」括起。變數名稱前方必須加上「$」（元貨幣符號）。變數名稱則可以使用英文大寫（A-Z）、小寫字（a-z）、數字（0-9）以及底線字符（_）。</p>
<p>以下為不正確使用變數的例子：</p>
<table border="0" cellpadding="3" cellspacing="0">
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font face="Courier New, Courier, mono">foo = 1; <font color="#339933"># 變數名稱必須以「$」符號作開首。</font><br />
      $foo.bar = 1; <font color="#339933"># 變數名稱只可包含英文大、小寫、數字以及底線字符。<br />
      $foo = $bar = 1; <font color="#339933"># 一句指令中不可同時對多個變數傳值。</font><br />
      1 = $foo;<font color="#339933"># 變數傳值的指令不可左右掉轉。</font><br />
      $bar = Hello; <font color="#339933"># 寫入字串時字串值需用單引號「'」括起。<br />
      </font></font><font color="#339999" face="Courier New, Courier, mono">Curve</font><font face="Courier New, Courier, mono">.<font color="#339999">Gauge</font>($foo = 1); <font color="#339933"># 變數傳值的指令必須單獨使用。<br />
      </font></font><font color="#339999" face="Courier New, Courier, mono">Curve</font><font face="Courier New, Courier, mono">.<font color="#339999">Gauge</font>(<font color="#993333">'$foo'</font>); <font color="#339933"># 使用變數時不用將變數名稱以單引號括起，否則該鍵值會變為該變數名稱。<br />
      </font>$bar = <font color="#993333">'Curve.Gauge'</font>; $bar(1.067); <font color="#339933"># 在指令中除了<a href="#method">鍵</a>和<a href="#method">參數</a>以外，其他地方均不可使用變數。</font></font></td>
  </tr>
</table>
<p><br />
</p>
<p><b><font size="4"><a name="operator" id="operator"></a>運算子</font></b> <strong><font color="#FF6633" size="1">NEW</font></strong></p>
<p><br />
</p>
<p>在變數傳值、<a href="#method">鍵</a>和<a href="#method">參數</a>中均可使用運算子。</p>
<table border="0" cellpadding="3" cellspacing="0">
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font face="Courier New, Courier, mono">$foo = 1 + 2; <font color="#339933"># 與 $foo =　3 等值。</font><br />
      </font><font color="#339999" face="Courier New, Courier, mono">Curve</font><font face="Courier New, Courier, mono">.<font color="#339999">Gauge</font>(1067 / 1000); <font color="#339933"># 與 Curve.Gauge(1.067) 等值。</font></font></td>
  </tr>
</table>
<p>以下為可使用的運算子。唯遞增（++）、遞減（--）運算子並不適用及對應，敬請留意。</p>
<table border="1" cellpadding="1" cellspacing="0">
  <tr>
    <td align="center" bgcolor="#eeeeee">演算子</td>
    <td bgcolor="#eeeeee">意思</td>
  </tr>
  <tr>
    <td align="center">+</td>
    <td>加值或字串接合</td>
  </tr>
  <tr>
    <td align="center">-</td>
    <td>減值</td>
  </tr>
  <tr>
    <td align="center">*</td>
    <td>乘值</td>
  </tr>
  <tr>
    <td align="center">/</td>
    <td>除值</td>
  </tr>
  <tr>
    <td align="center">%</td>
    <td>除值後取其餘數</td>
  </tr>
</table>
<p>以運算子 + 來說，
相加的項目為數字的話結果為相加後的和，而相加的項目為字串的話結果為兩個字串依次序連接後的新字串。如果相加的項目同時含有數字及字串的話，數字會先被轉為字串，然後依字串相加的方法處理。</p>
<table border="0" cellpadding="3" cellspacing="0">
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font face="Courier New, Courier, mono">$bar = <font color="#993333">'Hello'</font> + <font color="#993333">'World'</font>; <font color="#339933"># 與 $bar = 'HelloWorld' 等值。</font><br />
        <font color="#339999">Track</font>[$bar + 10]<font color="#339999">.Gauge</font>(1.067); <font color="#339933"># 與 Track['HelloWorld10'].Gauge(1.067) 等值。</font><br />
  $bar = 1 + 2 + <font color="#993333">'3'</font></font> <font color="#339933" face="Courier New, Courier, mono"># 與 $bar = '33' 等值。</font></td>
  </tr>
</table>
<p>運算子的運算優先順序如下：</p>
<table border="1" cellpadding="1" cellspacing="0">
  <tr>
    <td align="center" bgcolor="#eeeeee">優先順序</td>
    <td bgcolor="#eeeeee">運算子</td>
  </tr>
  <tr>
    <td align="center">1</td>
    <td>括弧</td>
  </tr>
  <tr>
    <td align="center">2</td>
    <td>一元運算子<br/>（只有一個運算元的運算子）</td>
  </tr>
  <tr>
    <td align="center">3</td>
    <td>* /</td>
  </tr>
  <tr>
    <td align="center">4</td>
    <td>+ -</td>
  </tr>
</table>
<p>以下算式將會得出數值為 15 的結果：</p>
<table border="0" cellpadding="3" cellspacing="0">
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font face="Courier New, Courier, mono"> 1 - 2 * -(3 + 4)</font></td>
  </tr>
</table>
<p>以下為錯誤示範：</p>
<table border="0" cellpadding="3" cellspacing="0">
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font face="Courier New, Courier, mono">$foo = 2 (3 - 1); <font color="#339933"># 乘算時必須加上「*」運算子。</font><br />
$foo = 1 / {(2 + 3) * 4}; <font color="#339933"># 大、中、小括號在此並沒有意義。</font><br />
$foo * 1000 = 1067; <font color="#339933"># 傳值指令的左方不可使用運算子。</font><br />
$bar = <font color="#993333">'Hello'</font> * 2; <font color="#339933"># 字串與字串或數字間只能使用「+」運算子。</font></font></td>
  </tr>
</table>
<p><br />
</p>
<p><strong><font size="4"><a name="distance" id="distance"></a>距離</font></strong></p>
<p><br />
</p>
<p>如果指令為以下語法的話，該指令會被視為設定下述指令所套用到的距離點。</p>
<ul>
  <li>純數字</li>
  <li>值為數字的變數</li>
  <li>運算結果為數字的算式</li>
</ul>
<p>設定距離點的值必須為等於或大於 0 的整數。而變數 distance 則代表套用到該行時距離點的值（既定變數並不使用 $ 作開首）。</p>
<p>以下將會示範距離點的設定方法：（以下的 $foo 變數為一個已傳入數字的變數）</p>
<table border="0" cellpadding="3" cellspacing="0">
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><p><font face="Courier New, Courier, mono">1000; <font color="#339933"># 設定現在的距離點為 1000 。</font><br />
      1000 - 25; <font color="#339933"># 設定為 975 。</font><br />
      distance + 0.5; <font color="#339933"># distance 為上一次設定的位置，所以再運算以後則是設定為 975.5 。</font><br />
        $foo; <font color="#339933"># 設定為 $foo 的值。</font><br />
        </font></p>    </td>
  </tr>
</table>
<p>在此設定的距離值通常會與現實中有差別。由於模擬時的誤差再加上運算上的誤差而產生的誤差會不斷擴大，故此建議盡可能將誤差縮至最小。</p>
<p><br />
</p>
<p><b><font size="4"><a name="method" id="method"></a>基本語法</font></b></p>
<p><br />
</p>
<p>基本語法如下：</p>
<p>物件[鍵].方法(參數, 參數, ...)</p>
<p><br />
</p>
<p><strong>自身列車所行走的軌道</strong></p>
<p><br />
</p>
<p>Curve.Gauge(<em>value</em>)</p>
<p>設定軌條間距。此值乃用於計算傾側滾動角。</p>
<blockquote>
  <p><em>value</em> 軌條間距 [m]</p>
</blockquote>
<p><br />
</p>
<p>Curve.BeginTransition()</p>
<p>開始平面曲線的緩和曲線。</p>
<p><br />
</p>
<p>Curve.BeginCircular(<em>radius, cant</em>)</p>
<p>開始平面曲線的圓曲線。</p>
<blockquote>
  <p><em>radius</em> 曲線半徑 [m] (正: 右曲線, 負: 左曲線)<br />
  <em>cant</em> 傾斜時外彎軌條升高高度 [m]</p>
</blockquote>
<p><br />
</p>
<p>Curve.End()</p>
<p>結束平面曲線，開始直線。</p>
<p><br />
</p>
<p>Gradient.BeginTransition()</p>
<p>開始縱面曲線。</p>
<p><br />
</p>
<p>Gradient.BeginConst(<em>gradient</em>)</p>
<p>開始一定的坡度。</p>
<blockquote>
  <p><em>gradient</em> 坡度 [‰] </p>
</blockquote>
<p><br />
</p>
<p>Gradient.End()</p>
<p>結束坡度、開始固定水平度。</p>
<p><br />
</p>
<p><strong>其他軌道</strong></p>
<p><br />
</p>
<p>Track[<em>trackKey</em>].Gauge(<em>value</em>)</p>
<p>設定其他路軌的軌條間距。此值乃用於計算傾側滾動角。</p>
<blockquote>
  <p><em>trackKey</em>: 軌道名稱（任意字串）<br />
  <em>value</em> 軌條間距 [m]</p>
</blockquote>
<p><br />
</p>
<p>Track[<em>trackKey</em>].Position(<em>x, y</em>)<br />
Track[<em>trackKey</em>].Position(<em>x, y, radiusH, radiusV</em>)</p>
<p>設定其他路軌的位置。要設定軌道物件的話請使用 Repeater[].Begin0 指令。</p>
<blockquote>
  <p><em>trackKey</em>: 軌道名稱（任意字串）<br />
  <em>x</em>: 與自身軌道間 x 軸的距離 [m]<br />
    <em>y</em>: 與自身軌道間 y 軸的距離 [m]<br />
    <em>radiusH</em>: 與下個 Track[].Position 指令之間的平面曲線的半徑 [m] (0: 直線)<br />
    <em>radiusV</em>: 與下個 Track[].Position 指令之間的縱面曲線的半徑 [m] (0: 直線)</p>
</blockquote>
<p><br />
</p>
<p>Track[<em>trackKey</em>].Cant(<em>value</em>)</p>
<p>設定其他軌道的傾側度。記述多個 Track[].Cant 指令時兩者之間將以線性補間。</p>
<blockquote>
  <p><em>trackKey</em>: 軌道名稱（任意字串）<br />
    <em>value</em>: 傾側度 [m] (正: 向右傾側, 負: 向左傾側)</p>
</blockquote>
<p><br />
</p>
<p><strong>風景</strong></p>
<p><br />
</p>
<p>Structure.Load(<em>filePath</em>)</p>
<p>載入及使用<a href="structure.html">物件列表檔案</a>。使用物件前必須加插本指令。</p>
<blockquote>
  <p><em>filePath</em>: 該<a href="structure.html">物件列表檔案</a>的相對路徑</p>
</blockquote>
<p><br />
</p>
<p>Structure[<em>structureKey</em>].Put(<em>trackKey, x, y, z, rx, ry, rz, tilt, span</em>)</p>
<p>加插一個物件。</p>
<blockquote>
  <p><em>structureKey</em>: 物件名稱（<a href="structure.html">物件列表檔案</a>中所定義的物件名稱）<br />
    <em>trackKey</em>: 要加插到的軌道名稱 (0: 自身軌道)<br />
    <em>x</em>: 與該軌道間 x 軸的距離 [m]<br />
  <em>y</em>: 與該軌道間 y 軸的距離 [m]<br />
    <em>z</em>: 與該軌道間 z 軸的距離 [m]<br />
      <em>rx</em>: 與該軌道依 x 軸轉動的角度 [deg]<br />
    <em>ry</em>: 與該軌道依 y 軸轉動的角度 [deg]<br />
    <em>rz</em>: 與該軌道依 z 軸轉動的角度 [deg]<br />
    <em>tilt</em>: 傾斜選項 (0: 正常水平, 1: 與坡度一起傾斜, 2: 與曲線傾側一起傾斜, 3: 與坡度及曲線傾側一起傾斜)<br />
  <em>span</em>: 曲線時中心線的長度 [m] </p>
</blockquote>
<p><br />
</p>
<p>Structure[<em>structureKey</em>].Put0(<em>trackKey, tilt, span</em>)</p>
<p>加插一個物件。此指令與參數 x, y, z, rx, ry, rz 的值為 0 的 Structure[].Put 指令的效果相同。</p>
<blockquote>
  <p><em>structureKey</em>: 物件名稱（<a href="structure.html">物件列表檔案</a>中所定義的物件名稱）<br />
    <em>trackKey</em>: 要加插到的軌道名稱 (0: 自身軌道)<br />
    <em>tilt</em>: 傾斜選項 (0: 正常水平, 1: 與坡度一起傾斜, 2: 與曲線傾側一起傾斜, 3: 與坡度及曲線傾側一起傾斜)<br />
      <em>span</em>: 曲線時中心線的長度 [m] </p>
</blockquote>
<p><br />
</p>
<p>Structure[<em>structureKey</em>].PutBetween(<em>trackKey1, trackKey2</em>)</p>
<p>在兩條軌道之間加插一個物件。當兩條軌道之間的距離變動時物件亦相對地作出變形。</p>
<blockquote>
  <p><em>trackKey1</em>: 第一條軌道的軌道名稱 (0: 自身軌道)<br />
  <em>trackKey2</em>: 第二條軌道的軌道名稱</p>
</blockquote>
<p><br />
</p>
<p>Repeater[<em>repeaterKey</em>].Begin(<em>trackKey, x, y, z, rx, ry, rz, tilt, span, interval, structureKey1, structureKey2, ... , structureKeyN</em>)</p>
<p>開始連續加插物件。物件將會以固定的間距沿軌道放置。</p>
<blockquote>
  <p><em>repeaterKey</em>: 連續加插名稱（任意字串）<br />
      <em>trackKey</em>: 要加插到的軌道名稱 (0: 自身軌道)<br />
      <em>x</em>: 與該軌道間 x 軸的距離 [m]<br />
      <em>y</em>: 與該軌道間 y 軸的距離 [m]<br />
      <em>z</em>: 與該軌道間 z 軸的距離 [m]<br />
      <em>rx</em>: 與該軌道依 x 軸轉動的角度 [deg]<br />
      <em>ry</em>: 與該軌道依 y 軸轉動的角度 [deg]<br />
      <em>rz</em>: 與該軌道依 z 軸轉動的角度 [deg]<br />
      <em>tilt</em>: 傾斜選項 (0: 正常水平, 1: 與坡度一起傾斜, 2: 與曲線傾側一起傾斜, 3: 與坡度及曲線傾側一起傾斜)<br />
      <em>span</em>: 曲線時中心線的長度 [m] <br />
      <em>interval</em>: 加插的間距 [m]<br />
      <em>structureKey1, ... , structureKeyN</em>: 物件名稱（<a href="structure.html">物件列表檔案</a>中所定義的物件名稱）</p>
</blockquote>
<p>物件將會依照參數 <em>interval</em> 所設的定距離 (<em>dist</em>) 逐個加插到地圖內。如果你有 <em>N</em> 個物件要連續加插到地圖內的話，每個物件將會以 (<em>dist</em> / <em>interval</em>) mod <em>N</em> + 1 的距離加插。</p>
<p><img src="http://bvets.net/edit/route/images/repeater.png" alt="図" width="439" height="301" /></p>
<p><br />
</p>
<p>Repeater[<em>repeaterKey</em>].Begin0(<em>trackKey, tilt, span, interval, structureKey1, structureKey2, ... , structureKeyN</em>)</p>
<p>開始連續加插物件。此指令與參數 x, y, z, rx, ry, rz 的值為 0 的 Repeater[].Begin 指令的效果相同。</p>
<blockquote>
  <p><em>repeaterKey</em>: 連續加插名稱（任意字串）<br />
      <em>trackKey</em>: 要加插到的軌道名稱 (0: 自身軌道)<br />
      <em>tilt</em>: 傾斜選項 (0: 正常水平, 1: 與坡度一起傾斜, 2: 與曲線傾側一起傾斜, 3: 與坡度及曲線傾側一起傾斜)<br />
      <em>span</em>: 曲線時中心線的長度 [m] <br />
      <em>interval</em>: 加插的間距 [m]<br />
      <em>structureKey1, ... , structureKeyN</em>: 物件名稱（<a href="structure.html">物件列表檔案</a>中所定義的物件名稱）</p>
</blockquote>
<p><br />
</p>
<p>Repeater[<em>repeaterKey</em>].End()</p>
<p>結束連續加插物件。</p>
<blockquote>
  <p><em>repeaterKey</em>: 連續加插名稱</p>
</blockquote>
<p><br />
</p>
<p>Background.Change(<em>structureKey</em>)</p>
<p>變更背景物件。</p>
<blockquote>
  <p><em>structureKey</em>: 物件名稱</p>
</blockquote>
<p><br />
</p>
<p><strong>停車點</strong></p>
<p><br />
</p>
<p>Station.Load(<em>filePath</em>)</p>
<p>載入及使用<a href="station.html">停車點列表檔案</a>。使用 Station.Put 指令前必須加插本指令。</p>
<blockquote>
  <p><em>filePath</em>: 該<a href="station.html">停車點列表檔案</a>的相對路徑</p>
</blockquote>
<p><br />
</p>
<p>Station[<em>stationKey</em>].Put(<em>door, margin1, margin2</em>)</p>
<p>設定停車點。要加插列車停止位置目標物件的話請再使用 Structure.Put 指令。</p>
<blockquote>
  <p><em>stationKey</em>: 停車點名稱（<a href="station.html">停車點列表檔案</a>中所定義的停車點名稱）<br />
    <em>door</em>: 開門位置（-1: 左, 1: 右）<br />
    <em>margin1</em>: 停止位置誤差的後方容許範圍（請設定負數值）<br />
  <em>margin2</em>: 停止位置誤差的前方容許範圍</p>
</blockquote>
<p><br />
</p>
<p><strong>訊號</strong></p>
<p><br />
</p>
<p>Signal.Load(<em>filePath</em>)</p>
<p>載入及使用<a href="signal.html">訊號燈物件列表檔</a>。使用 Signal.Put 指令前必須加插本指令。</p>
<blockquote>
  <p><em>filePath</em>: 該<a href="signal.html">訊號燈物件列表檔</a>的相對路徑</p>
</blockquote>
<p><br />
</p>
<p>Section.BeginNew(<em>signal0</em>, <em>signal1</em>, ... , <em>signalN</em>)</p>
<p>開始一個閉塞訊號區間。</p>
<blockquote>
  <p><em>signal0</em>: 當先行列車在下一個閉塞訊號區間時所顯示的訊號燈的索引號<br />
    <em>signal1</em>: 當先行列車在下兩個閉塞訊號區間時所顯示的訊號燈的索引號<br />
    <em>signalN</em>: 當先行列車在下 n+1 個閉塞訊號區間時所顯示的訊號燈的索引號</p>
</blockquote>
<p><br />
</p>
<p>Signal[<em>signalAspectKey</em>].Put(<em>section, trackKey, x, y</em>)<br />
  Signal[<em>signalAspectKey</em>].Put(<em>section, trackKey, x, y, z, rx, ry, rz, tilt, span</em>)</p>
<p>加插一個地面訊號燈。</p>
<blockquote>
  <p><em>signalAspectKey</em>: 訊號燈物件名稱 (<a href="signal.html">訊號燈物件列表檔</a>中所定義的訊號燈物件名稱)<br />
      <em>section</em>: 關聯的下 n 個的閉塞訊號區間<br />
      <em>trackKey</em>: 要加插到的軌道名稱<br />
      <em>x</em>: 與該軌道間 x 軸的距離 [m]<br />
      <em>y</em>: 與該軌道間 y 軸的距離 [m]<br />
      <em>z</em>: 與該軌道間 z 軸的距離 [m]<br />
      <em>rx</em>: 與該軌道依 x 軸轉動的角度 [deg]<br />
      <em>ry</em>: 與該軌道依 y 軸轉動的角度 [deg]<br />
      <em>rz</em>: 與該軌道依 z 軸轉動的角度 [deg]<br />
      <em>tilt</em>: 傾斜選項 (0: 正常水平, 1: 與坡度一起傾斜, 2: 與曲線傾側一起傾斜, 3: 與坡度及曲線傾側一起傾斜)<br />
      <em>span</em>: 曲線時中心線的長度 [m] </p>
</blockquote>
<p><br />
</p>
<p>Beacon.Put(<em>type</em>, <em>section</em>, <em>sendData</em>)</p>
<p>加插一個地面訊號發送器。要加插地面訊號發送器物件的話請再使用 Structure[].Put 指令。</p>
<blockquote>
  <p><em>type</em>: 保安裝置中所識別的地面訊號發送器的類別（整數）<br />
    <em>section</em>: 關聯的下 n 個的閉塞訊號區間<br />      
    <em>sendData</em>: 發送到保安裝置的數據值（整數）</p>
</blockquote>
<p><br />
</p>
<p>Signal.SpeedLimit(<em>v0</em>, <em>v1</em>, ... , <em>vn</em>)</p>
<p>設定訊號燈亮時所許可的速度限制。</p>
<blockquote>
  <p><em>v0</em>, <em>v1</em>, ... , <em>vn</em>: 行駛速度 [km/h]</p>
</blockquote>
<p><br />
</p>
<p><strong>限制速度</strong></p>
<p><br />
</p>
<p>SpeedLimit.Begin(<em>v</em>)</p>
<p>開始限制速度。要加插限制速度標誌物件的話請再使用 Structure.Put 指令。</p>
<blockquote>
  <p><em>v</em>: 行駛速度 [km/h] </p>
</blockquote>
<p><br />
</p>
<p>SpeedLimit.End()</p>
<p>結束限制速度。要加插解除限制速度標誌物件的話請再使用 Structure.Put 指令。</p>
<p><br />
</p>
<p><strong>先行列車</strong></p>
<p><br />
</p>
<p>PreTrain.Pass(<em>time</em>)<br />
PreTrain.Pass(<em>second</em>) <strong><font color="#FF6633" size="1">NEW</font></strong></p>
<p>設定先行列車通過該距離點時的時間。</p>
<p><em>time</em>: 時間的字串值 ('hh:mm:ss')<br />
<i>second</i>: 以 00:00:00 作起點計算的秒數的時間值 [sec]</p>
<p><br /></p>
<p><strong>光源</strong></p>
<p><br />
</p>
<p>Light.Ambient(<em>red, green, blue</em>)</p>
<p>設定環境光源的顏色（Ambient Colour）。此指令只能在地圖檔案中使用一次。</p>
<blockquote>
  <p><em>red</em>: RGB 顏色系統中紅色的比率值 (0 ~ 1)<br />
    <em>green</em>: RGB 顏色系統中綠色的比率值 (0 ~ 1)<br />
    <em>blue</em>: RGB 顏色系統中藍色的比率值 (0 ~ 1)</p>
</blockquote>
<p>Light.Diffuse(<em>red, green, blue</em>)</p>
<p>設定平行光源的顏色（Diffuse Colour）。此指令只能在地圖檔案中使用一次。</p>
<blockquote>
  <p><em>red</em>: RGB 顏色系統中紅色的比率值 (0 ~ 1)<br />
    <em>green</em>: RGB 顏色系統中綠色的比率值 (0 ~ 1)<br />
    <em>blue</em>: RGB 顏色系統中藍色的比率值 (0 ~ 1)</p>
</blockquote>
<p>Light.Direction(<em>pitch, yaw</em>)</p>
<p>設定在距離點為 0 的位置時，平行光源所射向的方向。此指令只能在地圖檔案中使用一次。</p>
<p><img src="http://bvets.net/edit/route/images/light.png" width="324" height="263" /></p>
<p><br />
</p>
<p><strong>煙霧效果</strong></p>
<p><br />
</p>
<p>Fog.Set(<em>density</em>, <em>r</em>ed, <em>green</em>, <em>blue</em>)</p>
<p>設定煙霧效果。記述多個 Fog.Set 指令時兩者之間將以線性補間。</p>
<blockquote>
  <p><em>density</em>: 濃度<br />
     <em>red</em>: RGB 顏色系統中紅色的比率值 (0 ~ 1)<br />
     <em>green</em>: RGB 顏色系統中綠色的比率值 (0 ~ 1)<br />
     <em>blue</em>: RGB 顏色系統中藍色的比率值 (0 ~ 1)</p>
</blockquote>
<p><br />
</p>
<p><strong>駕駛室</strong></p>
<p><br />
</p>
<p>CabIlluminance.Set(<em>value</em>)</p>
<p>設定駕駛室的亮度。</p>
<blockquote>
  <p><em>value</em>: 亮度 (0 ~ 1) </p>
</blockquote>
<p><br />
</p>
<p><strong>列車特性</strong></p>
<p><br />
</p>
<p>Irregularity.Change(<em>x</em>, <em>y</em>, <em>r</em>, <em>lx</em>, <em>ly</em>, <em>lr</em>)</p>
<p>設定列車在軌道上的位移。</p>
<blockquote>
  <p><em>x</em>: 左右位移 (相當於左軌條與右軌條左右變位的平均值) 的標準偏差 [m]<br />
    <em>y</em>: 上下位移 (相當於左軌條與右軌條高低變位的平均值) 的標準偏差 [m]<br />
    <em>r</em>: 水平旋轉位移 (相當於軌道水平旋轉位移除以軌道無水平旋轉位移的值) 的標準偏差 [rad]<br />
    <em>lx</em>: 左右位移的極限 [m]<br />
    <em>ly</em>: 上下位移的極限 [m]<br />
  <em>lr</em>: 水平旋轉位移的極限 [m]</p>
</blockquote>
<p><br />
</p>
<p>Adhesion.Change(<em>a</em>)<br />
  Adhesion.Change(<em>a</em>, <em>b</em>, <em>c</em>)</p>
<p>設定車輪與軌條間的黏著程度。</p>
<blockquote>
  <p><em>a</em>: 行駛速度為 0 km/h 時的黏著係數<br />
      <em>b</em>: 在指定行駛速度時計算黏著係數的 b 的值<br />
  <em>c</em>: 在指定行駛速度時計算黏著係數的 c 的值</p>
</blockquote>
<p><img src="http://bvets.net/edit/route/images/mu.png" alt="粘着係数式" width="78" height="30" /></p>
<p>以上算式中，<em>v</em>: 行駛速度 [km/h]</p>
<p><br /></p>
<p><strong>聲音</strong></p>
<p><br />
</p>
<p>Sound.Load(<em>filePath</em>)</p>
<p>載入及使用<a href="sound.html">聲音列表檔案</a>。</p>
<blockquote>
  <p><em>filePath</em>: 該<a href="sound.html">聲音列表檔案</a>的相對路徑</p>
</blockquote>
<p><br />
</p>
<p>Sound[<em>soundKey</em>].Play()</p>
<p>當經過該距離點時播放一次該 <em>soundKey</em> 聲音。</p>
<p><br />
</p>
<p>Sound3D.Load(<em>filePath</em>)</p>
<p>載入及使用<a href="sound.html">聲音列表檔案</a>。</p>
<blockquote>
  <p><em>filePath</em>: 該<a href="sound.html">聲音列表檔案</a>的相對路徑</p>
</blockquote>
<p><br />
</p>
<p>Sound3D[<em>soundKey</em>].Put(<em>x, y</em>)</p>
<p>加插一個固定音源點。該固定音源點會連續播放該 <em>soundKey</em> 聲音。</p>
<blockquote>
  <p><em>x</em>: 與該軌道間 x 軸的距離 [m]<br />
      <em>y</em>: 與該軌道間 y 軸的距離 [m]</p>
</blockquote>
<p><br />
</p>
<p>RollingNoise.Change(<em>index</em>)</p>
<p>轉用其他車輪滾動聲。</p>
<blockquote>
  <p><em>index</em>: <a href="../vehicle/sound.html">列車聲音檔案</a>中 [Run] 部分所定義的屬性的索引號</p>
</blockquote>
<p><br />
</p>
<p>FlangeNoise.Change(<em>index</em>)</p>
<p>轉用其他行駛曲軌時的磨擦聲。</p>
<blockquote>
  <p><em>index</em>: <a href="../vehicle/sound.html">列車聲音檔案</a>中 [Flange] 部分所定義的屬性的索引號</p>
</blockquote>
<p><br />
</p>
<p>JointNoise.Play(<em>index</em>)</p>
<p>當經過此距離點時根據列車行駛速度播放經過道岔（波口）時的噪音。</p>
<blockquote>
  <p><em>index</em>: <a href="../vehicle/sound.html">列車聲音檔案</a>中 [Joint] 部分所定義的屬性的索引號</p>
</blockquote>
<p><br />
</p>
<p><strong>其他列車</strong></p>
<p><br />
</p>
<p>Train.Add(<em>trainKey, filePath, trackKey, direction</em>)</p>
<p>加插一個<a href="train.html">其他列車車組檔案</a>中所定義的其他列車車組。</p>
<blockquote>
  <p><em>trainKey</em>: 其他列車名稱（任意字串）<br />  
    <em>filePath</em>: 該<a href="train.html">其他列車車組檔案</a>的相對路徑<br />
    <em>trackKey</em>: 行駛的軌道<br />        
    <em>direction</em>: 行駛方向（-1: 相反（對頭車）, 1: 並行）</p>
</blockquote>
<p><br />
</p>
<p>Train[<em>trainKey</em>].Enable(<em>time</em>)<br />
Train[<em>trainKey</em>].Enable(<em>second</em>) <strong><font color="#FF6633" size="1">NEW</font></strong></p>
<p>當自身列車經過該距離點時，並且當指定時間一到，該其他列車就開始行駛。</p>
<blockquote>
  <p><em>trainKey</em>: 其他列車名稱<br />
     <em>time</em>: 時間的字串值 ('hh:mm:ss')<br />
     <em>second</em>: 以 00:00:00 作起點計算的秒數的時間值 [sec]</p>
</blockquote>
<p><br />
</p>
<p>Train[<em>trainKey</em>].Stop(<em>decelerate, stopTime, accelerate, speed</em>)</p>
<p>使該其他列車在該距離點停車。</p>
<blockquote>
  <p><em>trainKey</em>: <em>其他列車名稱</em><br />
    <em>decelerate</em>: 減速度 [km/h/s]<br />
  <em>stopTime</em>: 停車時間 [s]<br />
  <em>accelerate</em>: 加速度 [km/h/s]<br />
  <em>speed</em>: 加速後的行駛速度 [km/h]</p>
</blockquote>
<p><br />
</p>
<p><b><font size="4"><a name="include" id="include"></a>插入其他地圖檔案</font></b> <strong><font color="#FF6633" size="1">NEW</font></strong></p>
<p><br />
</p>
<p>你可以使用 include 指令在指定位置插入其他地圖檔案。</p>
<table border="0" cellpadding="3" cellspacing="0">
  <tr>
    <td valign="top" nowrap="nowrap" bgcolor="#EEEEEE"><font face="Courier New, Courier, mono"><font color="#3333ff">include</font> <font color="#993333">'submap.txt'</font>;</font></td>
  </tr>
</table>
<p>插入的檔案必須包含<a href="#header">標頭</a>部分。然而，該檔案的標頭將不會被插入。</p>
<p align="right"><font size="1">&copy; 2013 mackoy</font></p>
</body>

<!-- Mirrored by HTTrack Website Copier/3.x [XR/YP'2000] -->
</html>  